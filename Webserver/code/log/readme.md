# 日志系统
1. 日志系统大致可以分成两部分，其一是单例模式与阻塞队列的定义，其二是日志类的定义与使用。
其中单例模式，使用的是线程安全的懒汉模式  
2. 日志特点  
日志，由服务器自动创建，并记录运行状态，错误信息，访问数据的文件。
* 同步日志，日志写入函数与工作线程串行执行，由于涉及到I/O操作，当单条日志比较大的时候，同步模式会阻塞整个处理流程，服务器所能处理的并发能力将有所下降，尤其是在峰值的时候，写日志可能成为系统的瓶颈。
* 异步日志，将所写的日志内容先存入阻塞队列，写线程从阻塞队列中取出内容，写入日志。
 
本项目中，使用单例模式创建日志系统，对服务器运行状态、错误信息和访问数据进行记录，该系统可以实现按天分类，超行分类功能，可以根据实际情况分别使用同步和异步写入两种方式。其中异步写入方式，将生产者-消费者模型封装为阻塞队列，创建一个写线程，工作线程将要写的内容push进队列，写线程从队列中取出内容，写入日志文件。

# 日志分级
日志分级的实现大同小异，一般的会提供五种级别，具体的  
* Debug，调试代码时的输出，在系统实际运行时，一般不使用。
* Warn，这种警告与调试时终端的warning类似，同样是调试代码时使用。
* Info，报告系统当前的状态，当前执行的流程或接收的信息等。
* Error和Fatal，输出系统的错误信息。

本项目只用了Debug，Warn，Info，Error四种
日志超最大行数限制、按天进行分文件：
* 日志写入前会判断当前day是否为创建日志的时间，行数是否超过最大行限制
* 若为创建日志时间，写入日志，否则按当前时间创建新log，更新创建时间和行数
* 若行数超过最大行限制，在当前日志的末尾加count/max_lines为后缀创建新log

